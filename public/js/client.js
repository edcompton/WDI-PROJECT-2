"use strict";var googleMap=googleMap||{},google=google;googleMap.openNav=function(e){console.log(document.getElementById("mySidenav")),null!==document.getElementById("mySidenav")&&$("#sideNavAll").remove();var o="",o=$(e.target).text();console.log(o),$.get("https://api.spotify.com/v1/search?q="+o+"&type=artist").done(function(e){var o="",o=e.artists.items[0].id;console.log(o),$.get("https://api.spotify.com/v1/artists/"+o+"/albums?country=GB").done(function(e){console.log(e.items[0].uri);var o="",o=e.items[0].uri;console.log(o);var n="",n='<div id="sideNavAll"> <div id="mySidenav" class="sidenav">\n      <a href="javascript:void(0)" class="closebtn" onclick="googleMap.closeNav()">&times;</a>\n      <a href="#">Spotify Tracks</a>\n      <iframe src="https://embed.spotify.com/?uri='+o+'" width="300" height="800" frameborder="0" allowtransparency="true"></iframe>\n      </div>\n      <span onclick="openNav()"></span>\n      </div>';$("body").append(n),console.log(n),setTimeout(function(){document.getElementById("mySidenav").style.width="300px"},100),console.log("clicked")})})},googleMap.closeNav=function(){$("#sideNavAll").empty(),setTimeout(function(){document.getElementById("mySidenav").style.width="0"})},googleMap.addInfoWindowForVenue=function(e,o){var n=this;google.maps.event.addListener(o,"click",function(){var t="";t+="<h4>"+e.name+"</h4>",$.get("https://app.ticketmaster.com/discovery/v2/events.json?apikey=S6Ne496thElaCfSl25nc9B3NkTEAk0o7&venueId="+e.ticketmasterId+"&size=20&classificationName=Music").done(function(e){$(e._embedded.events).each(function(e,a){return t+='<div><a class="modalWindow"><h6>'+a.name+"</h6></a><p>"+a.dates.start.localDate+"</p></div>","undefined"!=typeof n.infoWindow&&n.infoWindow.close(),n.infoWindow=new google.maps.InfoWindow({content:t}),n.infoWindow.open(n.map,o),n.map.setCenter(o.getPosition()),a.name})})})},googleMap.createMarkerForVenue=function(e){var o=new google.maps.MarkerImage("http://www.freeiconspng.com/uploads/microfono-microphone-icon-coloring-book-colouring-xanthochroi---2.png",null,null,null,new google.maps.Size(18,28)),n=new google.maps.LatLng(e.lat,e.lng),t=new google.maps.Marker({position:n,map:this.map,animation:google.maps.Animation.DROP,icon:o});googleMap.addInfoWindowForVenue(e,t)},googleMap.populateVenues=function(e){$.each(e.venues,function(e,o){setTimeout(function(){googleMap.createMarkerForVenue(o)},50*e)})},googleMap.getVenues=function(){$.get("http://localhost:3000/venues").done(this.populateVenues)},googleMap.mapSetup=function(){var e=document.getElementById("map-canvas"),o={zoom:12,center:new google.maps.LatLng(51.506178,(-.088369)),mapTypeId:google.maps.MapTypeId.ROADMAP,styles:[{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#e0efef"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"},{hue:"#1900ff"},{color:"#c0e8e8"}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{visibility:"on"},{lightness:700}]},{featureType:"water",elementType:"all",stylers:[{color:"#7dcdcd"}]}]};this.map=new google.maps.Map(e,o),$("body").on("click",".modalWindow",googleMap.openNav),this.getVenues()},$(googleMap.mapSetup.bind(googleMap));